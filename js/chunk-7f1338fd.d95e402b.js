(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f1338fd"],{1550:function(t,a,s){"use strict";s.r(a);var c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container-fluid my-4"},[s("div",{staticClass:"vld-parent"},[s("loading",{attrs:{active:t.effect.isLoading},on:{"update:active":function(a){return t.$set(t.effect,"isLoading",a)}}})],1),s("Cart",{staticClass:"shopping-left",attrs:{addCart:t.cartProductsNum},on:{delcart:t.getCartData}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 d-flex align-items-center"},[s("div",{staticClass:"detail-img bg-cover",style:{backgroundImage:"url("+t.product.imgUrl+")"}})]),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-lg-8"},[s("div",{staticClass:"detail-title mb-3"},[t.product.category?s("router-link",{staticClass:"detail-brand mr-3",style:t.compileBrandImg(),attrs:{to:"/guest/productlist/"+t.product.category}}):t._e(),s("span",[t._v(t._s(t.product.title))])],1),t._m(0),t.product.content?s("p",{staticClass:"detail-content mb-3",domProps:{innerHTML:t._s(t.regexpSetting(t.product["content"]))}}):t._e(),s("p",{staticClass:"detail-sale mb-3"},[t._v(" 特價: "+t._s(t._f("currency")(t.product.price))+" "),s("span",[t._v("原價: "+t._s(t._f("currency")(t.product.origin_price)))])]),s("div",{staticClass:"d-flex align-items-start align-items-md-center"},[s("div",{staticClass:"d-flex flex-column flex-md-row"},[s("div",{staticClass:"cart-group mr-3 mb-2 mb-md-0"},[s("a",{class:{"cart-disable":t.qty<2},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.qty=t.qty-1}}},[s("i",{staticClass:"fas fa-minus"})]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.qty,expression:"qty",modifiers:{number:!0}}],attrs:{type:"number",min:1,max:3},domProps:{value:t.qty},on:{input:function(a){a.target.composing||(t.qty=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),s("a",{class:{"cart-disable":t.qty>2},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.qty=t.qty+1}}},[s("i",{staticClass:"fas fa-plus"})])]),t.qty<4?s("span",{staticClass:"detail-current-price mr-3"},[t._v("目前金額: "+t._s(t._f("currency")(t.product.price*t.qty)))]):s("span",{staticClass:"detail-current-price mr-3"},[t._v("單次消費限購3台!")])]),s("button",{staticClass:"btn btn-primary",attrs:{disabled:t.product.id===t.effect.currentLoading},on:{click:function(a){return t.checkCart(t.product["id"],t.qty)}}},[t.product.id===t.effect.currentLoading?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fas fa-shopping-cart pr-2"}),t._v(" 加入購物車 ")])])]),s("div",{staticClass:"col-lg-4 d-none d-lg-block"},[t._m(1),s("ul",{staticClass:"cart-list"},[s("li",[t.cartProducts.carts&&0===t.cartProducts.carts.length?s("div",{staticClass:"cart-nothing"},[t._v("尚無商品")]):t._e()]),t._l(t.cartProducts.carts,(function(a,c){return s("li",{key:"cart-"+c},[s("div",{staticClass:"cart-listitem"},[s("div",{staticClass:"d-flex mb-3 mb-xl-0"},[s("router-link",{staticClass:"listitem-img mr-2",style:{backgroundImage:"url("+a.product.imgUrl+")"},attrs:{to:"/guest/productdetail/"+a.product.id,title:a.product.title}}),s("div",{staticClass:"mr-2"},[s("h4",{staticClass:"listitem-title mb-2"},[t._v(t._s(a.product.title))]),s("p",{staticClass:"listitem-info"},[t._v(t._s(t._f("currency")(a.product.price))+" 共"+t._s(a.qty)+t._s(a.product.unit))])])],1),s("div",{staticClass:"w-100 d-flex justify-content-end align-items-center"},[s("span",{staticClass:"listitem-total mr-3"},[t._v(t._s(t._f("currency")(a.total)))]),s("button",{staticClass:"btn btn-outline-info",attrs:{disabled:a.id===t.effect.currentLoading},on:{click:function(s){return t.delCartData(a.id,!0)}}},[a.id===t.effect.currentLoading?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fas fa-trash-alt"})])])])])}))],2),s("div",{staticClass:"cart-total"},[s("span",{staticClass:"mr-2"},[t._v("總計金額:"+t._s(t._f("currency")(t.cartProducts.total)))]),s("button",{staticClass:"btn btn-info mt-3 mt-xl-0",attrs:{disabled:0===t.cartProductsNum},on:{click:t.toOrderCheck}},[s("i",{staticClass:"fas fa-cash-register mr-2"}),t._v("結帳去 ")])])])])])]),s("div",{staticClass:"container"},[s("div",{staticClass:"topic mb-5"},[t._v("商品描述")]),t.product.description?s("p",{staticClass:"detail-content",domProps:{innerHTML:t._s(t.regexpSetting(t.product["description"]))}}):t._e(),s("div",{staticClass:"topic mb-5"},[t._v("其他熱門商品")]),s("div",{staticClass:"row"},t._l(t.random,(function(t,a){return s("div",{key:"random-"+a,staticClass:"col-sm-4"},[s("ProductCard",{attrs:{card:t}})],1)})),0)])],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"detail-badge badge-primary p-2 mb-3"},[s("i",{staticClass:"fas fa-thumbs-up"}),t._v(" 商品特色 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h4",{staticClass:"cart-title"},[s("i",{staticClass:"fas fa-gift mr-2"}),t._v("購物清單 ")])}],i=(s("99af"),s("7db0"),s("c975"),s("ac1f"),s("5319"),s("284c")),e=s("e915"),n=s("b3b1"),o={components:{ProductCard:e["a"],Cart:n["a"]},data:function(){return{publicPath:"/vuecli3-mobile-shop/",product:{},random:[],cartProducts:{},cartProductsNum:null,qty:1,effect:{isLoading:!1,currentLoading:""}}},methods:{getProductDetail:function(){var t=this,a=t.$route.params.id,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/product/").concat(a);t.effect.isLoading=!0,t.$http.get(s).then((function(a){t.product=a.data.product,t.getData(),t.effect.isLoading=!1}))},getData:function(){var t="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/products/all"),a=this,s=[];a.$http.get(t).then((function(t){s=Object(i["a"])(t.data.products),a.getRandomProduct.apply(a,Object(i["a"])(s))}))},getRandomProduct:function(){for(var t=this,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var r=s.length;t.random=[];while(t.random.length<3){var i=Math.floor(Math.random()*r);-1===t.random.indexOf(s[i])&&t.product.id!==s[i].id&&t.random.push(s[i])}},compileBrandImg:function(){return{backgroundImage:"url(".concat(this.publicPath,"img/").concat(this.product.category,".svg)")}},getCartData:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/cart");t.$http.get(a).then((function(a){t.cartProducts=a.data.data,t.cartProductsNum=a.data.data.carts.length}))},addToCart:function(t,a){var s=this,c="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/cart");a>3&&(a=3,s.$bus.$emit("每款商品限購3個","warning"));var r={product_id:t,qty:a};s.effect.currentLoading=t,s.$http.post(c,{data:r}).then((function(t){s.getCartData(),s.effect.currentLoading="",s.$bus.$emit("message:push",t.data.message,"success")}))},delCartData:function(t,a){var s=this,c="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/cart/").concat(t);s.effect.currentLoading=t,s.$http.delete(c).then((function(t){s.getCartData(),s.effect.currentLoading="",a&&s.$bus.$emit("message:push",t.data.message,"warning")}))},checkCart:function(t,a){var s=this,c=a,r=s.cartProducts.carts.find((function(a){return a.product.id===t}));"undefined"!==typeof r?(c+=r.qty,c>3?(c=3,s.$bus.$emit("message:push","每款商品限購3個","warning")):(s.delCartData(r.id,!1),s.addToCart(t,c))):s.addToCart(t,a)},regexpSetting:function(t){return t.replace(/(.{1,}\n\b)/g,"<span class='description-title'>$1</span>").replace(/\n/g,"<br>")},toOrderCheck:function(){this.cartProductsNum>0&&this.$router.push("/guest/productorder/check")}},watch:{$route:function(){this.getProductDetail()}},created:function(){this.getProductDetail(),this.getCartData()}},d=o,u=s("2877"),l=Object(u["a"])(d,c,r,!1,null,null,null);a["default"]=l.exports},"7db0":function(t,a,s){"use strict";var c=s("23e7"),r=s("b727").find,i=s("44d2"),e="find",n=!0;e in[]&&Array(1)[e]((function(){n=!1})),c({target:"Array",proto:!0,forced:n},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(e)},b3b1:function(t,a,s){"use strict";var c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"dropdown shopping-cart"},[s("button",{staticClass:"shopping-btn",on:{click:function(a){t.showCartList=!t.showCartList}}},[s("i",{staticClass:"fas fa-shopping-cart fa-3x"}),s("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cartProductsNum))])]),s("div",{staticClass:"dropdown-menu",class:{show:t.showCartList}},[s("div",{staticClass:"p-3"},[s("h5",{staticClass:"font-weight-bold"},[t._v("購物清單")]),s("div",{staticClass:"shopping-scroll my-3"},[s("table",{staticClass:"table"},[t.cartProductsNum>0?s("thead",[s("th"),s("th",[t._v("購買明細")]),s("th",[t._v("價格")])]):t._e(),s("tbody",[0===t.cartProductsNum?s("tr",[s("td",[t._v("目前尚無選購商品!")]),s("td"),s("td")]):t._e(),t._l(t.cartProducts.carts,(function(a,c){return s("tr",{key:"cart-"+c},[s("td",[s("router-link",{staticClass:"shopping-img",style:{backgroundImage:"url("+a.product.imgUrl+")"},attrs:{to:"/guest/productdetail/"+a.product.id}})],1),s("td",[s("h4",{staticClass:"mb-2"},[t._v(t._s(a.product.title))]),s("p",[t._v("共"+t._s(a.qty)+t._s(a.product.unit))])]),s("td",[s("p",[t._v(t._s(t._f("currency")(a.final_total)))]),s("button",{staticClass:"mt-3 btn btn-outline-info",on:{click:function(s){return t.delCartData(a.id)}}},[a.id===t.effect.currentLoading?s("i",{staticClass:"fas fa-spinner fa-spin"}):s("i",{staticClass:"fas fa-trash-alt"})])])])}))],2)])]),s("div",{staticClass:"shopping-total"},[t._v("總計金額: "+t._s(t._f("currency")(t.cartProducts.total)))]),s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:0===t.cartProductsNum},on:{click:t.toOrderCheck}},[s("i",{staticClass:"fas fa-shopping-cart mr-2"}),t._v("結帳去 ")])])])])},r=[],i=(s("99af"),{props:["addCart"],data:function(){return{cartProducts:{},cartProductsNum:null,showCartList:!1,effect:{isLoading:!1,currentLoading:""}}},methods:{getCartData:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/cart");t.$http.get(a).then((function(a){t.cartProducts=a.data.data,t.cartProductsNum=a.data.data.carts.length}))},delCartData:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("morecoke","/cart/").concat(t);a.effect.currentLoading=t,a.$http.delete(s).then((function(t){a.getCartData(),a.effect.currentLoading="",a.$bus.$emit("message:push",t.data.message,"warning"),a.$emit("delcart")}))},toOrderCheck:function(){this.cartProductsNum>0&&this.$router.push("/guest/productorder/check")}},watch:{addCart:function(){this.getCartData()}},created:function(){this.getCartData()}}),e=i,n=s("2877"),o=Object(n["a"])(e,c,r,!1,null,null,null);a["a"]=o.exports},e915:function(t,a,s){"use strict";var c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"product-card"},[s("div",{staticClass:"product-brand bg-cover",style:t.compileBrandImg(t.card["category"])}),s("div",{staticClass:"product-img",style:{backgroundImage:"url("+t.card.imgUrl+")"},on:{click:function(a){return t.goProductDetail(t.card["id"])}}}),s("div",{staticClass:"product-title"},[t._v(" "+t._s(t.card.title)+" "),s("div",{staticClass:"product-type"},[t._v(t._s(t.classifyType(t.card["unit"])))])]),s("div",{staticClass:"product-textzone"},[s("div",[s("small",[t._v("原價 : ")]),s("span",{staticClass:"price-origin"},[t._v(t._s(t._f("currency")(t.card.origin_price)))])]),s("div",{staticClass:"price-sale"},[s("small",[t._v("特價 : ")]),t._v(t._s(t._f("currency")(t.card.price)))])]),s("a",{staticClass:"product-btn btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.goProductDetail(t.card["id"])}}},[t._v("瞭解更多")])])},r=[],i=(s("99af"),{props:["card"],data:function(){return{publicPath:"/vuecli3-mobile-shop/"}},methods:{compileBrandImg:function(t){return{backgroundImage:"url(".concat(this.publicPath,"img/").concat(t,".svg)")}},classifyType:function(t){var a;switch(t){case"台":a="手機";break;case"支":a="手錶";break;case"組":a="耳機";break;default:break}return a},goProductDetail:function(t){this.$router.push({name:"Productdetail",params:{id:t}})}}}),e=i,n=s("2877"),o=Object(n["a"])(e,c,r,!1,null,null,null);a["a"]=o.exports}}]);
//# sourceMappingURL=chunk-7f1338fd.d95e402b.js.map